#include <avr/io.h>
#include <util/delay.h>
#include <avr/interrupt.h>

int count = 0;
int state = 1;
void mydelay(int d);

ISR(INT0_vect)
{

    cli();
    _delay_ms(50);
    count++;
    _delay_ms(30);
    sei();
    EIFR &= ~(1 << INTF0);
}

main()
{
    DDRA |= (1 << DDA0);
    DDRA |= (1 << DDA1);
    DDRA |= (1 << DDA2);
    DDRA |= (1 << DDA3);

    EIMSK |= 1 << INT0;
    EICRA |= 1 << ISC01;

    sei();

    while (1)
    {
        //_delay_ms(30);
        if (count > 9)
        {
            count = 0;
        }
        PORTA = (PORTA & 0xF0) | count;
    }
}

void mydelay(int d)
{
    for (int k = 0; k < d; k++)
    {
        for (int i = 0; i < 30000; i++)
            ;
    }
}
